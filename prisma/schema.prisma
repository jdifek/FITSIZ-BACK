generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  
}

model User {
  id             Int      @id @default(autoincrement())
  telegramId     String   @unique
  firstName      String?
  phone          String?
  email          String?
  isBotAvailable Boolean  @default(false)
  quiz           Boolean  @default(false)
  createdAt      DateTime @default(now())

  userMasks UserMask[] // üëà —Ç–µ–ø–µ—Ä—å —Å–ø–∏—Å–æ–∫ –º–∞—Å–æ–∫
}

model UserMask {
  id     Int @id @default(autoincrement())
  userId Int
  maskId Int

  user User @relation(fields: [userId], references: [id])
  mask Mask @relation(fields: [maskId], references: [id])

  @@unique([userId, maskId]) // –û–¥–∏–Ω —é–∑–µ—Ä ‚Äî –æ–¥–Ω–∞ –º–∞—Å–∫–∞ –æ–¥–∏–Ω —Ä–∞–∑
}

model UserAdmin {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  createdAt DateTime @default(now())
}

model Mask {
  id           Int          @id @default(autoincrement())
  name         String
  instructions String?
  imageUrl     String?
  price        String?
  weight       String?
  viewArea     String?
  sensors      Int?
  power        String?
  shadeRange   String?
  material     String?
  description  String?
  link         String?
  installment  String?
  size         String?
  days         String?
  features     Feature[]
  reviews      Review[]
  userMasks    UserMask[] // üëà —Ç–µ–ø–µ—Ä—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  ExtraField   ExtraField[]
}

model ExtraField {
  id     Int    @id @default(autoincrement())
  key    String
  value  String
  mask   Mask   @relation(fields: [maskId], references: [id])
  maskId Int
}

model Setting {
  key   String @id
  value String
}

model Video {
  id           Int     @id @default(autoincrement())
  title        String
  url          String? // URL –≤–∏–¥–µ–æ
  description  String? // –û–ø–∏—Å–∞–Ω–∏–µ
  duration     String? // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  thumbnailUrl String? // URL –º–∏–Ω–∏–∞—Ç—é—Ä—ã
}

model Feature {
  id     Int    @id @default(autoincrement())
  name   String // –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ")
  maskId Int // –°–≤—è–∑—å —Å –º–∞—Å–∫–æ–π
  mask   Mask   @relation(fields: [maskId], references: [id])
}

model Review {
  id        Int      @id @default(autoincrement())
  userName  String // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  rating    Float // –†–µ–π—Ç–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4.7)
  comment   String? // –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞
  createdAt DateTime @default(now())
  maskId    Int? // –°–≤—è–∑—å —Å –º–∞—Å–∫–æ–π
  mask      Mask?    @relation(fields: [maskId], references: [id])
}
